<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Mercurio.Driver.ViewModels"
             x:Class="Mercurio.Driver.Views.ContactPage"
             x:DataType="viewmodels:ContactViewModel"
             xmlns:converters="clr-namespace:Mercurio.Driver.Converters"
             Title="CONTACT"
             BackgroundColor="#F0F0F0">

    <ContentPage.Resources>
        <converters:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        
        <Style TargetType="Label" x:Key="HeaderLabel">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="TextColor" Value="Gray"/>
        </Style>
        <Style TargetType="Label" x:Key="ValueLabel">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="TextColor" Value="Black"/>
        </Style>
        <Style TargetType="Entry" x:Key="ValueEntry">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="TextColor" Value="Black"/>
        </Style>
        <Style TargetType="Button" x:Key="ActionButton">
            <Setter Property="BackgroundColor" Value="#B82E49"/>
            <Setter Property="TextColor" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="ContentLayout" Value="Left, 10" />
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="10">

            <ActivityIndicator IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" HorizontalOptions="Center"/>

            
            <Border StrokeThickness="0" BackgroundColor="White" Padding="15"
                    StrokeShape="RoundRectangle 8">
                <VerticalStackLayout Spacing="15">
                    
                    <VerticalStackLayout>
                        <Label Text="COMPANY NAME" Style="{StaticResource HeaderLabel}"/>
                        <Label Text="{Binding Provider.Name}" Style="{StaticResource ValueLabel}"/>
                    </VerticalStackLayout>

                    
                    <VerticalStackLayout>
                        <Label Text="CONTACT PHONE (Editable)" Style="{StaticResource HeaderLabel}"/>
                        <Entry Text="{Binding Provider.Phone}" Keyboard="Telephone" Style="{StaticResource ValueEntry}"/>
                    </VerticalStackLayout>

                    
                    <VerticalStackLayout>
                        <Label Text="ADDRESS" Style="{StaticResource HeaderLabel}"/>
                        <Label Text="{Binding Provider.Address}" Style="{StaticResource ValueLabel}" LineBreakMode="WordWrap"/>
                    </VerticalStackLayout>

                    
                    <VerticalStackLayout>
                        <Label Text="EMAIL" Style="{StaticResource HeaderLabel}"/>
                        <Label Text="{Binding Provider.Email}" Style="{StaticResource ValueLabel}"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>


            <VerticalStackLayout Margin="0,10,0,0" Spacing="5">

                
                <Button Text="Save Changes" 
                        Command="{Binding SaveChangesCommand}" 
                        Style="{StaticResource ActionButton}" 
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}">
                    <Button.ImageSource>
                        <FontImageSource FontFamily="FontAwesomeSolid"
                             Glyph="&#xf0c7;" 
                             Color="White"
                             Size="16"/>
                    </Button.ImageSource>
                </Button>

                
                <Button Text="Call the Office" 
                        Command="{Binding CallProviderCommand}" 
                        Style="{StaticResource ActionButton}" 
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}">
                    <Button.ImageSource>
                        <FontImageSource FontFamily="FontAwesomeSolid"
                             Glyph="&#xf095;" 
                             Color="White"
                             Size="16"/>
                    </Button.ImageSource>
                </Button>

                
                <Button Text="Navigate to the Office" 
                        Command="{Binding NavigateToProviderCommand}" 
                        Style="{StaticResource ActionButton}" 
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}">
                    <Button.ImageSource>
                        <FontImageSource FontFamily="FontAwesomeSolid"
                             Glyph="&#xf5a9;" 
                             Color="White"
                             Size="16"/>
                    </Button.ImageSource>
                </Button>

            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>