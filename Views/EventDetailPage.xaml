<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Mercurio.Driver.ViewModels"
             xmlns:models="clr-namespace:Mercurio.Driver.Models"
             x:Class="Mercurio.Driver.Views.EventDetailPage"
             x:DataType="viewmodels:EventDetailPageViewModel"
             Title="Event Details"
             BackgroundColor="#F0F0F0">

    <!-- Reutilizamos los estilos de PullOutDetailPage para consistencia -->
    <ContentPage.Resources>
        <Style TargetType="Grid" x:Key="NavRowStyle">
            <Setter Property="BackgroundColor" Value="White"/>
        </Style>
        <Style TargetType="Label" x:Key="NavLabelStyle">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="VerticalOptions" Value="Center"/>
        </Style>
        <Style TargetType="Label" x:Key="NavIconStyle">
            <Setter Property="FontFamily" Value="FontAwesomeSolid"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="VerticalOptions" Value="Center"/>
            <Setter Property="HorizontalOptions" Value="Center"/>
            <Setter Property="WidthRequest" Value="40"/>
        </Style>
        <Style TargetType="Label" x:Key="DetailHeaderLabel">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="TextColor" Value="Gray"/>
        </Style>
        <Style TargetType="Label" x:Key="DetailValueLabel">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="TextColor" Value="Black"/>
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Spacing="1">

            <!-- LISTA DE ACCIONES -->
            <CollectionView ItemsSource="{Binding Actions}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:EventAction">
                        <Grid Style="{StaticResource NavRowStyle}">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding Command}"/>
                            </Grid.GestureRecognizers>

                            <BoxView HeightRequest="1" Color="#F0F0F0" VerticalOptions="End" />

                            <Grid Padding="15" ColumnDefinitions="Auto, *, Auto">
                                <Label Grid.Column="0" Text="{Binding IconGlyph}" Style="{StaticResource NavIconStyle}"/>
                                <Label Grid.Column="1" Text="{Binding Text}" Style="{StaticResource NavLabelStyle}"/>
                                <Label Grid.Column="2" Text="" FontFamily="FontAwesomeSolid" VerticalOptions="Center"/>
                            </Grid>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- SECCIÓN DE DETALLES -->
            <Label Text="DETAILS" Margin="15,20,15,5" FontSize="14" TextColor="Gray" HorizontalOptions="Center" FontAttributes="Bold"/>

            <Border StrokeThickness="0" BackgroundColor="White" Padding="15" Margin="10,0,10,10"
                    StrokeShape="RoundRectangle 5">
                <VerticalStackLayout Spacing="20">
                    <!-- Address -->
                    <VerticalStackLayout>
                        <Label Text="ADDRESS (Tap to Copy)" Style="{StaticResource DetailHeaderLabel}" />
                        <Label Text="{Binding Event.Address}" Style="{StaticResource DetailValueLabel}" LineBreakMode="WordWrap"/>
                    </VerticalStackLayout>

                    <!-- Event Type -->
                    <VerticalStackLayout>
                        <Label Text="EVENT TYPE" Style="{StaticResource DetailHeaderLabel}"/>
                        <Label Text="{Binding Event.EventType}" Style="{StaticResource DetailValueLabel}"/>
                    </VerticalStackLayout>

                    <!-- Passenger -->
                    <VerticalStackLayout>
                        <Label Text="PASSENGER" Style="{StaticResource DetailHeaderLabel}"/>
                        <Label Text="{Binding Event.Patient}" Style="{StaticResource DetailValueLabel}"/>
                    </VerticalStackLayout>

                    <!-- Space Type -->
                    <VerticalStackLayout>
                        <Label Text="SPACE TYPE" Style="{StaticResource DetailHeaderLabel}"/>
                        <Label Text="{Binding Event.SpaceType}" Style="{StaticResource DetailValueLabel}"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>